<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6331195744309280"
     crossorigin="anonymous"></script>
<title>BMI 計算器｜Roy Toolbox</title>
<meta name="description" content="BMI 計算器：支援台灣、美國、日本、韓國標準，自動計算 BMI、體重範圍並提供分類表格。免費免安裝，線上可用。">

  <link rel="stylesheet" href="/global.css">
  <link rel="stylesheet" href="/css/loyui.css">
  <script src="/js/loadHeader.js"></script>

  <style>
    main {
      max-width: 1100px;
      margin: 0 auto;
      padding: 20px 16px 60px;
    }

    .loy-input, .loy-select {
      width: 100%;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: var(--card-bg);
      font-size: 14px;
      box-sizing: border-box;
      transition: 0.2s;
    }
    .loy-input:focus, .loy-select:focus {
      border-color: var(--loy-blue);
      box-shadow: 0 0 0 3px rgba(106,167,255,0.35);
    }

    .loy-label {
      margin-top: 10px;
      margin-bottom: 4px;
      font-size: 14px;
      font-weight: 600;
      display: block;
    }

    .bmi-layout {
      display: grid;
      grid-template-columns: 1.1fr 0.9fr;
      gap: 18px;
    }
    @media (max-width: 900px) {
      .bmi-layout { grid-template-columns: 1fr; }
    }

    .bmi-result-main {
      font-size: 26px;
      font-weight: 700;
      margin-bottom: 8px;
    }

    .bmi-tag {
      display: inline-block;
      padding: 3px 10px;
      border-radius: 999px;
      font-size: 12px;
      font-weight: 600;
      border: 1px solid var(--border);
      margin-left: 6px;
    }

    .bmi-detail {
      font-size: 13px;
      color: #777;
      line-height: 1.6;
      white-space: pre-line;
    }

    .bmi-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 12px;
      font-size: 13px;
    }
    .bmi-table th,
    .bmi-table td {
      padding: 6px 8px;
      border-bottom: 1px solid var(--border);
      text-align: left;
    }
    .bmi-table th {
      font-weight: 600;
      background: rgba(0,0,0,0.03);
    }

    #warnMsg {
      margin-top: 8px;
      font-size: 13px;
      color: #d93025;
      display: none;
    }
  </style>
</head>

<body>

<div id="header"></div>
<script>
  loadHeader("計算工具", "BMI 計算器");
</script>

<main>
  <h1>BMI 計算器</h1>
  <p>可選擇不同國家的 BMI 標準（美國、日本、韓國、台灣）。</p>

  <div class="bmi-layout">

    <!-- 左側 -->
    <section class="loy-card">
      <div class="loy-card-title">輸入資料</div>

      <label class="loy-label">國家 / 標準</label>
      <select id="country" class="loy-select">
        <option value="taiwan">台灣（衛福部）</option>
        <option value="usa">美國（CDC）</option>
        <option value="japan">日本（厚生勞動省）</option>
        <option value="korea">韓國（KSSO）</option>
      </select>

      <label class="loy-label">性別</label>
      <select id="gender" class="loy-select">
        <option value="male">男性</option>
        <option value="female">女性</option>
      </select>

      <label class="loy-label">身高（公分）</label>
      <input id="height" class="loy-input" type="number" placeholder="例如：170">

      <label class="loy-label">體重（公斤）</label>
      <input id="weight" class="loy-input" type="number" placeholder="例如：65">

      <div id="warnMsg">請輸入合理的資料。</div>

      <div style="margin-top:16px; text-align:right;">
        <button id="btnCalc" class="tool-btn">計算 BMI</button>
        <button id="btnClear" class="tool-btn secondary" style="margin-left:8px;">清空</button>
      </div>
    </section>

    <!-- 右側 -->
    <section class="loy-card">
      <div class="loy-card-title">結果</div>

      <div class="bmi-result-main">
        <span id="bmiValue">--</span>
        <span id="bmiTag" class="bmi-tag">尚未計算</span>
      </div>

      <div id="bmiDetail" class="bmi-detail">請輸入資料後開始計算。</div>

      <div id="idealWeight" class="bmi-detail" style="margin-top:10px; font-weight:600;"></div>

      <table class="bmi-table" id="bmiTable">
        <thead><tr><th>BMI 範圍</th><th>分類</th></tr></thead>
        <tbody id="bmiTableBody"></tbody>
      </table>

    </section>
  </div>
</main>

<script>
const BMI_STANDARDS = {
  taiwan: [
    { max: 18.5, label: "體重過輕" },
    { max: 24,   label: "正常範圍" },
    { max: 27,   label: "體重過重" },
    { max: 30,   label: "輕度肥胖" },
    { max: 35,   label: "中度肥胖" },
    { max: Infinity, label: "重度肥胖" }
  ],

  usa: [
    { max: 18.5, label: "Underweight" },
    { max: 25,   label: "Normal" },
    { max: 30,   label: "Overweight" },
    { max: Infinity, label: "Obesity" }
  ],

  japan: [
    { max: 18.5, label: "痩せ" },
    { max: 25,   label: "普通" },
    { max: 30,   label: "肥満 (1度)" },
    { max: 35,   label: "肥満 (2度)" },
    { max: 40,   label: "肥満 (3度)" },
    { max: Infinity, label: "肥満 (4度)" }
  ],

  korea: [
    { max: 18.5, label: "Underweight" },
    { max: 23,   label: "Normal" },
    { max: 25,   label: "Overweight" },
    { max: 30,   label: "Obese I" },
    { max: Infinity, label: "Obese II" }
  ]
};
function renderTable(country) {
  const body = document.getElementById("bmiTableBody");
  body.innerHTML = "";

  const std = BMI_STANDARDS[country];
  let prev = 0;

  std.forEach(s => {
    const max = s.max;
    const tr = document.createElement("tr");

    let range = (max === Infinity)
      ? `≥ ${prev}`
      : `${prev} ～ < ${max}`;

    tr.innerHTML = `<td>${range}</td><td>${s.label}</td>`;
    body.appendChild(tr);
    prev = max;
  });
}

renderTable("taiwan");
function calcIdealWeight(heightCm, bmiMin, bmiMax) {
  const h = heightCm / 100;
  return {
    min: Math.round((bmiMin * h * h) * 10) / 10,
    max: Math.round((bmiMax * h * h) * 10) / 10
  };
}
function calcBMI() {
  const h = parseFloat(height.value);
  const w = parseFloat(weight.value);
  const country = countrySelect.value;
  const gender = genderSelect.value;

  if (!h || !w || h < 50 || w < 20) {
    warnMsg.style.display = "block";
    return;
  }
  warnMsg.style.display = "none";

  const bmi = Math.round((w / Math.pow(h / 100, 2)) * 10) / 10;
  bmiValue.textContent = bmi;
  const std = BMI_STANDARDS[country];
  let tag = "";
  for (const s of std) {
    if (bmi < s.max) {
      tag = s.label;
      break;
    }
  }
  bmiTag.textContent = tag;
  const genderText = (gender === "male") ? "男性" : "女性";
  bmiDetail.textContent =
    `BMI 計算結果約為 ${bmi}，屬於「${tag}」。`;
  let normalRange = [18.5, 24]; // 台灣預設

  if (country === "usa")   normalRange = [18.5, 25];
  if (country === "japan") normalRange = [18.5, 25];
  if (country === "korea") normalRange = [18.5, 23];

  const ideal = calcIdealWeight(h, normalRange[0], normalRange[1]);
  idealWeight.textContent =
    `理想體重範圍：約 ${ideal.min} kg ～ ${ideal.max} kg`;

  renderTable(country);
}
const countrySelect = document.getElementById("country");
const genderSelect = document.getElementById("gender");

btnCalc.onclick = calcBMI;

btnClear.onclick = () => {
  height.value = "";
  weight.value = "";
  bmiValue.textContent = "--";
  bmiTag.textContent = "尚未計算";
  bmiDetail.textContent = "請輸入資料後開始計算。";
  idealWeight.textContent = "";
};

countrySelect.onchange = () =>
  renderTable(countrySelect.value);
<section class="loy-card" style="margin-top:24px;">
  <h2 style="font-size:16px; margin-bottom:8px;">關於這個工具</h2>
  <p style="font-size:13px; color:#555; margin:0 0 6px;">
    BMI（身體質量指數）是以「體重（公斤）」除以「身高（公尺）的平方」得到的指標，用來大致評估體重是否過輕、正常或過重。
  </p>
  <p style="font-size:13px; color:#555; margin:0 0 6px;">
    這個工具除了計算數值，還會依照不同國家或地區常用的分類範圍顯示結果，例如台灣、日韓或世界衛生組織的標準，幫助你理解在不同標準下的差異。
  </p>
  <p style="font-size:13px; color:#555; margin:0;">
    BMI 只是一個簡單數字，無法完整反映肌肉量、體脂肪分佈與健康狀況，有需要時仍建議參考專業醫療建議，不要被單一數值綁死。
  </p>
</section>
</script>


<div id="global-buttons"></div>
<script src="/js/global.js"></script>
<script src="/js/loyui.js"></script>

</body>
</html>
